# 整体架构

采用面向对象的设计模式，模块化设计，各模块职责清晰，低耦合高内聚。

## AgentLite 前端loop 上下文由后台管理
- 独立的模型配置
- Tool注入
- 独立的权限控制
- 各个阶段异常处理
- 规范化的消息体
- 可终止能力

## AgentFull
- 独立的模型配置
- Tools，Skills注入
- 独立的权限控制
- 各个阶段异常处理
- 规范化的消息体
- 可终止能力
- 上下文恢复
- 任务执行流程管理
- 消息历史管理

## SubAgent
- 继承自Agent
- 受限的Tools
- 上下文隔离
- 不同子Agent，不同格式化输出
- 任务分解和协作
- 父Agent通信机制

## Tools
- Tools定义和规范
- 本地Tools注册
- MCP发现和注册
- 工具执行管理
- 工具链支持
- 工具参数验证

## Skills
- Skills发现和加载
- Skills组合和编排
- Skills生命周期管理

## Models
- 模型配置管理
- 多模型支持
- 模型切换机制
- 模型参数配置
- 模型适配器抽象

## Logging
- 完整的日志记录系统
- 多级别日志支持
- 结构化日志输出
- 日志上下文追踪
- 性能指标记录

## Cost
- 成本追踪和统计
- Token使用量统计
- 成本分析和报告
- 成本预算控制


## Policy Engine
- 与Agent解耦的权限控制
- 细粒度权限策略
- 动态权限评估
- 权限缓存机制